#!/usr/bin/env python3

import cgitb
import sys
import matplotlib; matplotlib.use('agg')
from soccerimg import most_recent_image

cgitb.enable()

img = most_recent_image()
# stop gmail proxy cache 
# https://stackoverflow.com/questions/21802820/dynamic-images-for-email-such-as-countdown-clocks-in-light-of-gmail-image-cachi
print("Cache-Control: no-store, no-cache, must-revalidate, max-age=0");
print("Cache-Control: post-check=0, pre-check=0");
print("Pragma: no-cache");
print("Content-type: image/png\n")
sys.stdout.flush()
sys.stdout.buffer.write(img)
